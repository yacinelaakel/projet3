{% extends "::layout.html.twig" %}

{% block title %} Paiement - {{ parent() }}{% endblock %}

{% block body %}
	<h1>Paiement de vos billets</h1>
	<hr>
	
	<div class="row">
		<div class="col-xs-12">
			<div class="well">
				<strong>Récapitulatif de votre commande : </strong>
				<hr>

				<ul>
					<li>Date de réservation choisie : le <strong>{{ commande.laDate|date('d/m/Y') }} </strong> <span class="glyphicon glyphicon-ok"></li>
					<li>Type de billet : {% if commande.typeBillet == true %}<strong>Journée</strong> <span class="glyphicon glyphicon-ok">{% else %}<strong>Demi-journée</strong> <span class="glyphicon glyphicon-ok">{% endif %}</li>
					<li>Nombre de billet(s) : <strong>{{ commande.nbrBillet }}</strong> <span class="glyphicon glyphicon-ok"></li>
				</ul>
				<hr>

				<strong>Prix des billets : </strong>
				<br>
				<ul>
					{% for infoBillet in allBillets %}
						<li>Billet de "{{ infoBillet.prenom }} {{ infoBillet.nom }}" : <strong>{{ infoBillet.prix }}€</strong>
					{% endfor %}
				</ul>
				<hr>

				<strong>Prix total : {{ prixTotal }}€</strong>
			</div>
		</div>
	</div>
	
	<div class="row">	
		<form action="{{ path('ylaakel_billeterie_confirmation_billet', {'numCommande': commande.numCommande}) }}" method="POST" style="display:block; margin:auto; font-size:20px">
		  <script
		    src="https://checkout.stripe.com/checkout.js" class="stripe-button"
		    data-key="pk_test_6pRNASCoBOKtIshFeQd4XMUh"
		    data-amount="{{ prixTotal * 100}}"
		    data-name="Billeterie du Louvre"
		    data-description="Paiement"
		    data-image="https://stripe.com/img/documentation/checkout/marketplace.png"
		    data-locale="auto"
		    data-currency="EUR"
		    data-email="{{ commande.email }}"
		    data-label="Paiement final"
		    data-allow-remember-me="false">
		  </script>
		</form>
	</div>

{% endblock %}